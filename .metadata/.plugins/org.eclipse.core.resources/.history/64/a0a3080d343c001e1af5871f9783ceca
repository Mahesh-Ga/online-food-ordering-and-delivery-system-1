package com.onlinefood.service;

import javax.transaction.Transactional;

import org.modelmapper.ModelMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.onlinefood.dao.CustomerDao;
import com.onlinefood.dto.AddCustomerDTO;
import com.onlinefood.dto.CustomerRespDTO;
import com.onlinefood.entities.Customer;


@Service
@Transactional
public class CustomerServiceImpl implements CustomerService{
	
	@Autowired
	private ModelMapper mapper;
	
	@Autowired
	private CustomerDao customerDao;
	
	@Override
	public CustomerRespDTO addNewCustomer(AddCustomerDTO cDto) {
		if (cDto.getConfirmPassword().equals(cDto.getPassword())) {
			Customer customer = mapper.map(cDto, Customer.class);
			Customer persistentCustomer = customerDao.save(customer);
			return mapper.map(empRepo.save(employee), EmployeeRespDTO.class);
		} else
			throw new ApiException("Passwords don't match!!!!!");
	}
}
